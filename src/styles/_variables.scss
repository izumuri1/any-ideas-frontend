// src/styles/_variables.scss
// Any Ideas? プロジェクトのスタイル変数とmixinを定義
// 統一された命名規約を使用（app- プレフィックス）
// スマホ特化版 - 全コンポーネントの共通スタイルを集約

//////////////////////////////////////////////////////////////
/// カラーパレット
//////////////////////////////////////////////////////////////

// メインカラー
$app-bg-color:            #F4C14E; // メインイエロー（背景色）
$app-text-color:          #000000; // 黒色テキスト
$app-btn-primary:         #000000; // プライマリボタン（黒）
$app-btn-secondary:       #828282; // セカンダリボタン（グレー）

// サブカラー
$app-white:               #FFFFFF; // 白色
$app-gray-light:          #e5e7eb; // ライトグレー
$app-gray-medium:         #6b7280; // ミディアムグレー
$app-gray-dark:           #828282; // ダークグレー（入力テキスト等）
$app-gray-darker:         #4b5563; // より暗いグレー（ホバー用）

// ステータスカラー
$app-error-bg:            #fef2f2; // エラー背景
$app-error-color:         #dc2626; // エラーテキスト
$app-error-border:        #fecaca; // エラー枠線
$app-disabled-bg:         #f9fafb; // 無効状態背景
$app-success-color:       #059669; // 成功テキスト
$app-warning-color:       #d97706; // 警告テキスト

//////////////////////////////////////////////////////////////
/// フォント設定（スマホ最適化）
//////////////////////////////////////////////////////////////

// フォントファミリー
$app-font-theme:          'Montserrat', sans-serif; // タイトル用フォント
$app-font-body:           'Noto Sans JP', sans-serif; // 本文用フォント

// フォントサイズ (スマホ用に調整済み・rem単位で統一)
$app-font-logo:           1.75rem;  // ロゴ (28px) - スマホ用にサイズダウン
$app-font-title:          1.25rem;  // タイトル (20px) - スマホ用にサイズダウン
$app-font-subtitle:       1rem;     // サブタイトル (16px) - ズーム防止
$app-font-body:           0.875rem; // 本文 (14px)
$app-font-button:         1rem;     // ボタン (16px) - ズーム防止
$app-font-small:          0.8rem;   // 小さなテキスト (12.8px)

// フォントウェイト
$app-weight-normal:       400;
$app-weight-medium:       500;
$app-weight-bold:         700;
$app-weight-black:        900;

//////////////////////////////////////////////////////////////
/// レイアウト設定（スマホ特化）
//////////////////////////////////////////////////////////////

// スペーシング（スマホ専用）
$app-padding-mobile:      1rem;     // 基本パディング
$app-padding-small:       0.5rem;   // 小さなパディング
$app-padding-large:       1.5rem;   // 大きなパディング
$app-padding-xlarge:      2rem;     // 特大パディング

// カードサイズ（スマホ用に最適化）
$app-card-padding:        1rem;     // カード内パディング
$app-form-max-width:      100%;     // フォーム最大幅（画面幅を活用）

// 角丸（タッチしやすいサイズに調整）
$app-radius-card:         12px;
$app-radius-input:        8px;      // タッチしやすく
$app-radius-button:       8px;      // タッチしやすく
$app-radius-error:        8px;

// タッチ対応
$app-touch-target-min:    44px;     // 最小タッチ領域（Appleガイドライン準拠）
$app-button-height:       44px;     // ボタンの最小高さ

// シャドウ効果
$app-shadow-card:         0 4px 6px rgba(0, 0, 0, 0.1);
$app-shadow-button:       0 2px 4px rgba(0, 0, 0, 0.1);

//////////////////////////////////////////////////////////////
/// アニメーション設定
//////////////////////////////////////////////////////////////

// アニメーション時間
$app-animation-fast:      0.15s;
$app-animation-normal:    0.3s;
$app-animation-slow:      0.6s;

// イージング
$app-ease-out:           ease-out;
$app-ease-in-out:        ease-in-out;

//////////////////////////////////////////////////////////////
/// スクロール関連設定（アプリ全体の共通仕様）
//////////////////////////////////////////////////////////////

// スクロールバー非表示の設定
@mixin app-hidden-scrollbar {
  // 全ブラウザ対応でスクロールバーを隠す
  scrollbar-width: none; /* Firefox */
  -ms-overflow-style: none; /* IE and Edge */
  
  &::-webkit-scrollbar {
    display: none; /* Chrome, Safari, Opera */
  }
}

// スクロール可能エリアの基本設定
@mixin app-scrollable-area {
  @include app-hidden-scrollbar;
  -webkit-overflow-scrolling: touch;
  overscroll-behavior: contain;
  scroll-behavior: smooth;
}

// グラデーション付きスクロール可能エリア（上下）
@mixin app-scrollable-with-gradient($background-color: $app-white) {
  @include app-scrollable-area;
  position: relative;
  
  // 上部のグラデーション（フェードイン効果）
  &::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 20px;
    background: linear-gradient(
      to bottom,
      $background-color 0%,
      rgba($background-color, 0.8) 50%,
      transparent 100%
    );
    pointer-events: none;
    z-index: 1;
  }
  
  // 下部のグラデーション（フェードアウト効果）
  &::after {
    content: '';
    position: absolute;
    bottom: 0;
    left: 0;
    right: 0;
    height: 20px;
    background: linear-gradient(
      to top,
      $background-color 0%,
      rgba($background-color, 0.8) 50%,
      transparent 100%
    );
    pointer-events: none;
    z-index: 1;
  }
}

// リスト用のスクロール可能エリア（ワークスペース選択等）
@mixin app-scrollable-list($background-color: $app-bg-color, $max-height: 60vh) {
  @include app-scrollable-with-gradient($background-color);
  max-height: $max-height;
  overflow-y: auto;
  padding: 0.5rem 0;
  
  // スマホ用の調整 - Sass新仕様対応
  @media (max-width: 480px) {
    & {
      max-height: 50vh;
    }
  }
}

// 横スクロール用のグラデーション効果
@mixin app-horizontal-scrollable-with-gradient($background-color: $app-white) {
  @include app-scrollable-area;
  position: relative;
  overflow-x: auto;
  
  // 左端のグラデーション
  &::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    bottom: 0;
    width: 20px;
    background: linear-gradient(
      to right,
      $background-color 0%,
      rgba($background-color, 0.8) 50%,
      transparent 100%
    );
    pointer-events: none;
    z-index: 1;
  }
  
  // 右端のグラデーション
  &::after {
    content: '';
    position: absolute;
    top: 0;
    right: 0;
    bottom: 0;
    width: 20px;
    background: linear-gradient(
      to left,
      $background-color 0%,
      rgba($background-color, 0.8) 50%,
      transparent 100%
    );
    pointer-events: none;
    z-index: 1;
  }
}

//////////////////////////////////////////////////////////////
/// Mixins - テキストスタイル
//////////////////////////////////////////////////////////////

@mixin app-logo-style {
  font-family: $app-font-theme;
  font-size: $app-font-logo;
  font-weight: $app-weight-black;
  color: $app-text-color;
  margin: 0;
  line-height: 1.2;
  letter-spacing: -0.01em;
}

@mixin app-title-style {
  font-family: $app-font-theme;
  font-size: $app-font-title;
  font-weight: $app-weight-bold;
  color: $app-text-color;
  margin: 0 0 0.5rem 0;
  line-height: 1.3;
}

@mixin app-subtitle-style {
  font-family: $app-font-body;
  font-size: $app-font-subtitle;
  font-weight: $app-weight-medium;
  color: $app-text-color;
  margin: 0 0 0.5rem 0;
  line-height: 1.4;
}

@mixin app-text-style {
  font-family: $app-font-body;
  font-size: $app-font-body;
  font-weight: $app-weight-normal;
  color: $app-text-color;
  line-height: 1.6;
  margin: 0 0 1rem 0;
}

@mixin app-small-text-style {
  font-family: $app-font-body;
  font-size: $app-font-small;
  font-weight: $app-weight-normal;
  color: $app-gray-medium;
  line-height: 1.4;
}

//////////////////////////////////////////////////////////////
/// Mixins - エラーメッセージ
//////////////////////////////////////////////////////////////

@mixin app-error-message {
  background-color: $app-error-bg;
  color: $app-error-color;
  border: 1px solid $app-error-border;
  border-radius: $app-radius-error;
  padding: $app-padding-mobile;
  margin: 0 0 1rem 0;
  font-size: $app-font-body;
  font-weight: $app-weight-medium;
  text-align: center;
  line-height: 1.5;
  
  // アニメーション対応
  animation: errorSlideIn $app-animation-normal $app-ease-out;
}

@mixin app-success-message {
  background-color: #f0fdf4;
  color: $app-success-color;
  border: 1px solid #bbf7d0;
  border-radius: $app-radius-error;
  padding: $app-padding-mobile;
  margin: 0 0 1rem 0;
  font-size: $app-font-body;
  font-weight: $app-weight-medium;
  text-align: center;
  line-height: 1.5;
}

//////////////////////////////////////////////////////////////
/// Mixins - ボタンレイアウト（アプリ全体の統一仕様）
//////////////////////////////////////////////////////////////

// ボタングループの基本レイアウト - 縦配置
@mixin app-button-group-vertical($gap: 1rem) {
  display: flex;
  flex-direction: column;
  gap: $gap;
  width: 100%;
}

// ボタングループの基本レイアウト - 横配置
@mixin app-button-group-horizontal($gap: 1rem, $justify: flex-start) {
  display: flex;
  flex-direction: row;
  gap: $gap;
  justify-content: $justify;
  align-items: center;
  flex-wrap: wrap;
}

// カードアクション用ボタングループ（アイデアカード等）
@mixin app-card-action-group {
  @include app-button-group-horizontal(0.5rem, flex-start);
  margin-top: 0.75rem;
  
  .btn-like {
    @include app-button-base;
    background-color: transparent;
    color: $app-error-color;
    border: none;
    padding: 0.5rem 0.75rem;
    font-size: $app-font-body;
    min-height: auto;
    flex: none;
    
    &:hover:not(:disabled) {
      background-color: rgba($app-error-color, 0.1);
    }
  }
  
  .btn-proceed {
    @include app-button-primary;
    flex: 1;
    min-width: 80px;
    padding: 0.5rem 1rem;
    font-size: $app-font-body;
    min-height: auto;
  }
  
  .btn-delete {
    @include app-button-base;
    background-color: $app-gray-medium;
    color: $app-white;
    padding: 0.5rem 1rem;
    font-size: $app-font-body;
    min-height: auto;
    flex: none;
    
    &:hover:not(:disabled) {
      background-color: $app-gray-darker;
    }
  }
}

// フォーム用ボタングループ（主要アクション + 補助アクション）
@mixin app-form-button-group {
  @include app-button-group-vertical(1rem);
  
  // スマホでは縦配置、デスクトップでは横配置に変更可能
  @media (min-width: 768px) {
    flex-direction: row;
    justify-content: flex-end;
    
    // メインボタンを右、サブボタンを左に配置
    .btn-primary {
      order: 2;
      flex: none;
      width: auto;
      min-width: 120px;
    }
    
    .btn-secondary {
      order: 1;
      flex: none;
      width: auto;
      min-width: 100px;
    }
  }
}

// ナビゲーション用ボタングループ（ヘッダー等）
@mixin app-nav-button-group {
  @include app-button-group-horizontal(0.75rem, center);
}

// 危険なアクション用の分離レイアウト
@mixin app-dangerous-action-group {
  @include app-button-group-vertical(1.5rem);
  
  .btn-danger {
    @include app-button-base;
    background-color: $app-error-color;
    color: $app-white;
    border: 1px solid $app-error-color;
    
    &:hover:not(:disabled) {
      background-color: darken($app-error-color, 10%);
    }
  }
}

//////////////////////////////////////////////////////////////
/// Mixins - ボタンスタイル
//////////////////////////////////////////////////////////////

@mixin app-button-base {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  border: none;
  border-radius: $app-radius-button;
  cursor: pointer;
  padding: 0.75rem 1rem;
  min-height: $app-touch-target-min;
  transition: all $app-animation-fast $app-ease-out;
  font-family: $app-font-body;
  font-size: $app-font-button;
  font-weight: $app-weight-medium;
  text-decoration: none;
  
  // タッチ対応
  -webkit-tap-highlight-color: transparent;
  touch-action: manipulation;
  
  &:active {
    transform: scale(0.98);
  }

  &:disabled {
    cursor: not-allowed;
    opacity: 0.6;
    transform: none;
  }
}

@mixin app-button-primary {
  @include app-button-base;
  color: $app-white;
  background-color: $app-btn-primary;
  width: 100%;
  
  &:hover:not(:disabled) {
    opacity: 0.9;
  }
}

@mixin app-button-secondary {
  @include app-button-base;
  color: $app-text-color;
  background-color: $app-btn-secondary;
  border: 1px solid $app-btn-secondary;
  
  &:hover:not(:disabled) {
    opacity: 0.8;
  }
}

@mixin app-button-outline {
  @include app-button-base;
  color: $app-btn-primary;
  background-color: transparent;
  border: 1px solid $app-btn-primary;
  
  &:hover:not(:disabled) {
    background-color: $app-btn-primary;
    color: $app-white;
  }
}

@mixin app-button-link {
  @include app-button-base;
  color: $app-btn-primary;
  background-color: transparent;
  border: none;
  text-decoration: underline;
  min-height: auto;
  padding: 0.5rem;
  
  &:hover:not(:disabled) {
    opacity: 0.7;
  }
}

//////////////////////////////////////////////////////////////
/// Mixins - レイアウト（スマホ特化）
//////////////////////////////////////////////////////////////

@mixin app-fullscreen-container {
  position: fixed;
  top: 0;
  left: 0;
  width: 100vw;
  height: 100vh;
  background-color: $app-bg-color;
  display: grid;
  place-items: center;
  padding: $app-padding-mobile;
  
  // セーフエリア対応
  padding-top: max($app-padding-mobile, env(safe-area-inset-top));
  padding-bottom: max($app-padding-mobile, env(safe-area-inset-bottom));
  padding-left: max($app-padding-mobile, env(safe-area-inset-left));
  padding-right: max($app-padding-mobile, env(safe-area-inset-right));
  
  // スマホ最適化
  overflow-y: auto;
  -webkit-overflow-scrolling: touch;
}

@mixin app-card-style($background: $app-white) {
  background: $background;
  border-radius: $app-radius-card;
  box-shadow: $app-shadow-card;
  padding: $app-card-padding;
  width: 100%;
  margin: 0 auto;
}

@mixin app-large-card-style($background: $app-bg-color) {
  @include app-card-style($background);
  padding: $app-padding-large;
  text-align: center;
  display: flex;
  flex-direction: column;
  gap: 1.5rem;
  justify-content: center;
  max-width: none;
  min-height: auto;
}

//////////////////////////////////////////////////////////////
/// Mixins - ワークスペース関連
//////////////////////////////////////////////////////////////

@mixin app-workspace-item {
  @include app-card-style($app-white);
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 1rem;
  margin-bottom: 1rem;
  cursor: pointer;
  transition: all $app-animation-fast $app-ease-out;
  border: 1px solid $app-gray-light;
  
  &:hover {
    border-color: $app-btn-primary;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
  }
  
  &:active {
    transform: scale(0.98);
  }
  
  .workspace-info {
    flex: 1;
    text-align: left;
    
    .workspace-name {
      @include app-title-style;
      font-size: $app-font-subtitle;
      margin: 0 0 0.25rem 0;
    }
    
    .workspace-description {
      @include app-text-style;
      margin: 0 0 0.5rem 0;
      display: -webkit-box;
      -webkit-line-clamp: 2;
      -webkit-box-orient: vertical;
      overflow: hidden;
      text-overflow: ellipsis;
    }
    
    .workspace-date {
      @include app-small-text-style;
    }
  }
}

//////////////////////////////////////////////////////////////
/// Mixins - Home画面関連
//////////////////////////////////////////////////////////////

@mixin app-page-header {
  background-color: $app-white;
  border-bottom: 1px solid $app-gray-light;
  padding: $app-padding-mobile;
  box-shadow: $app-shadow-card;
  
  .header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    max-width: 100%;
    margin: 0 auto;
  }
}

@mixin app-main-content {
  flex: 1;
  width: 100%;
  max-width: 100%;
  margin: 0 auto;
  background-color: $app-bg-color;
}

@mixin app-section-style {
  background-color: $app-white;
  border-radius: $app-radius-card;
  padding: $app-padding-large;
  margin-bottom: $app-padding-large;
  box-shadow: $app-shadow-card;
}

@mixin app-idea-form {
  @include app-section-style;
  
  .section-title {
    @include app-title-style;
    text-align: center;
    margin-bottom: $app-padding-large;
    color: $app-text-color;
  }
  
  .form-row {
    display: flex;
    flex-direction: column;
    gap: 1rem;
    margin-bottom: 1.5rem;
    
    .input-field {
      @include app-input-base;
    }
  }
  
  .btn-primary {
    @include app-button-primary;
  }
}

@mixin app-ideas-zone {
  @include app-section-style;
  
  .zone-title {
    @include app-title-style;
    font-size: $app-font-subtitle;
    margin-bottom: $app-padding-mobile;
    color: $app-text-color;
    border-bottom: 2px solid $app-btn-primary;
    padding-bottom: 0.5rem;
  }
  
  .ideas-cards {
    display: flex;
    flex-direction: column;
    gap: 1rem;
  }
}

@mixin app-idea-card {
  background-color: $app-white;
  border: 1px solid $app-gray-light;
  border-radius: $app-radius-card;
  padding: $app-padding-mobile;
  transition: all $app-animation-fast $app-ease-out;
  
  // パフォーマンス最適化
  will-change: transform;
  transform: translateZ(0);
  
  &:hover {
    border-color: $app-btn-primary;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
  }
  
  .idea-text {
    @include app-text-style;
    margin-bottom: $app-padding-mobile;
    line-height: 1.6;
  }
  
  // カードアクション用の統一レイアウトを適用
  .card-actions {
    @include app-card-action-group;
  }
}

//////////////////////////////////////////////////////////////
/// Mixins - フォーム関連
//////////////////////////////////////////////////////////////

@mixin app-input-base {
  width: 100%;
  padding: 0.75rem;
  border: 1px solid $app-gray-light;
  border-radius: $app-radius-input;
  font-family: $app-font-body;
  font-size: $app-font-subtitle; // ズーム防止のため16px
  background-color: $app-white;
  color: $app-text-color;
  
  // スマホ最適化
  -webkit-appearance: none;
  touch-action: manipulation;
  min-height: $app-touch-target-min;
  
  &::placeholder {
    color: $app-gray-medium;
    opacity: 1;
  }
  
  &:focus {
    outline: none;
    border-color: $app-btn-primary;
    box-shadow: 0 0 0 2px rgba(0, 0, 0, 0.1);
  }
  
  &:disabled {
    background-color: $app-disabled-bg;
    color: $app-gray-medium;
    cursor: not-allowed;
  }
}

@mixin app-form-group-style {
  display: flex;
  flex-direction: column;
  gap: 0.5rem;
  width: 100%;
  margin-bottom: 1rem;
  
  label {
    @include app-subtitle-style;
    font-size: $app-font-body;
    font-weight: $app-weight-medium;
    margin-bottom: 0.25rem;
    text-align: left;
  }
  
  input, textarea, select {
    @include app-input-base;
  }
  
  .form-error {
    @include app-small-text-style;
    color: $app-error-color;
    margin: 0.25rem 0 0 0;
  }
}

//////////////////////////////////////////////////////////////
/// Mixins - ローディング関連
//////////////////////////////////////////////////////////////

@mixin app-loading-container {
  @include app-fullscreen-container;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  gap: 2rem;
  overflow: hidden;
  touch-action: none;
}

@mixin app-loading-spinner($size: 60px) {
  position: relative;
  display: flex;
  align-items: center;
  justify-content: center;
  width: $size;
  height: $size;
  
  &::before {
    content: '';
    position: absolute;
    width: 100%;
    height: 100%;
    border: 4px solid $app-gray-light;
    border-top: 4px solid $app-btn-primary;
    border-radius: 50%;
    animation: spinMain 1.2s linear infinite;
    will-change: transform;
    transform: translateZ(0);
  }
  
  &::after {
    content: '';
    position: absolute;
    width: 70%;
    height: 70%;
    background-color: $app-btn-primary;
    border-radius: 50%;
    animation: pulse 1.5s ease-in-out infinite;
    opacity: 0.3;
    will-change: transform, opacity;
    transform: translateZ(0);
  }
}

@mixin app-loading-text {
  @include app-text-style;
  font-size: $app-font-subtitle;
  font-weight: $app-weight-medium;
  color: $app-btn-primary;
  text-align: center;
  animation: fadeInUp 0.8s $app-ease-out 0.3s both;
}

//////////////////////////////////////////////////////////////
/// Mixins - レスポンシブ対応
//////////////////////////////////////////////////////////////

@mixin app-responsive-grid($columns: 1, $gap: 1rem) {
  display: grid;
  grid-template-columns: repeat($columns, 1fr);
  gap: $gap;
  
  // スマホでは常に1カラム
  @media (max-width: 767px) {
    grid-template-columns: 1fr;
  }
}

//////////////////////////////////////////////////////////////
/// アニメーション定義
//////////////////////////////////////////////////////////////

@keyframes spinMain {
  0% { transform: rotate(0deg); }
  100% { transform: rotate(360deg); }
}

@keyframes pulse {
  0%, 100% { transform: scale(0.8); opacity: 0.3; }
  50% { transform: scale(1.2); opacity: 0.1; }
}

@keyframes fadeInUp {
  0% {
    opacity: 0;
    transform: translateY(20px);
  }
  100% {
    opacity: 1;
    transform: translateY(0);
  }
}

@keyframes logoFadeIn {
  0% {
    opacity: 0;
    transform: scale(0.8);
  }
  100% {
    opacity: 1;
    transform: scale(1);
  }
}

@keyframes errorSlideIn {
  0% {
    opacity: 0;
    transform: translateY(-10px);
  }
  100% {
    opacity: 1;
    transform: translateY(0);
  }
}

@keyframes progressFill {
  0% {
    transform: translateX(-100%);
  }
  50% {
    transform: translateX(0%);
  }
  100% {
    transform: translateX(100%);
  }
}